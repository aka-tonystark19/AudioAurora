#include <stdio.h>
#include <system.h>
#include <sys/alt_irq.h>
#include <sys/alt_stdio.h>
#include <altera_avalon_timer_regs.h>
#include "math.h"
#include "complex.h"
#include "stdlib.h"
#include <sys/time.h>

typedef double complex cplx;
#define N 1024

// Hardware timer functions
void init_isr(void);
static void hori_time_isr(void * context, alt_u32 id);
static void vert_time_isr(void * context, alt_u32 id);

// Running fft calculation to frequency recurrence
void runfft(int index);
int callfft(void);

// Updating one frame on vga
void runvga(int change);

// Global variables in system
unsigned int magn[N];
unsigned int freq[N];

// Array to store the color values of the pixels
unsigned char image[160][120];
static int sizes[] = {50, 40, 30, 20, 10, 10, 20, 30, 40, 50, 50, 40, 30, 20, 10, 10, 20, 30, 40, 50};
static int colors[] = {0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001, 0b000001};
unsigned int data [] = {21321,
		21574,
		14,
		0,
		24908,
		26230,
		14389,
		14126,
		11830,
		12337,
		48,
		24932,
		24948,
		22016,
		71,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32640,
		32639,
		32896,
		32895,
		32640,
		32640,
		32896,
		32896,
		32895,
		32895,
		32895,
		32895,
		32895,
		32895,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32640,
		32896,
		32895,
		32895,
		32896,
		32895,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32895,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32895,
		32639,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32895,
		32895,
		32895,
		32895,
		32640,
		32640,
		32639,
		32639,
		32639,
		32639,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32639,
		32895,
		32896,
		32640,
		32895,
		32640,
		32896,
		32896,
		32895,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32640,
		32640,
		32640,
		32896,
		32896,
		32639,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32639,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32639,
		32895,
		32895,
		32896,
		32896,
		32895,
		32640,
		32895,
		32896,
		32640,
		32895,
		32896,
		32896,
		32640,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32895,
		32895,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32639,
		32640,
		32640,
		32639,
		32896,
		32896,
		32639,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32895,
		32895,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32639,
		32896,
		32896,
		32639,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32639,
		32640,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32895,
		32895,
		32640,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32895,
		32639,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32895,
		32895,
		32896,
		32895,
		32896,
		32896,
		32895,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32640,
		32640,
		32639,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32895,
		32896,
		32896,
		32640,
		32640,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32639,
		32896,
		32895,
		32896,
		32896,
		32640,
		32640,
		32639,
		32895,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32640,
		32640,
		32895,
		32896,
		32639,
		32640,
		32895,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32639,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32895,
		32640,
		32895,
		32895,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32640,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32895,
		32640,
		32895,
		32896,
		32895,
		32896,
		32896,
		32896,
		32640,
		32896,
		32640,
		32640,
		32639,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32640,
		32639,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32639,
		32639,
		32895,
		32895,
		32896,
		32640,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32895,
		32896,
		32895,
		32896,
		32896,
		32896,
		32640,
		32895,
		32640,
		32896,
		32895,
		32895,
		32895,
		32896,
		32895,
		32895,
		32895,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32640,
		32640,
		32639,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32639,
		32640,
		32896,
		32640,
		32896,
		32640,
		32640,
		32895,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32639,
		32896,
		32895,
		32895,
		32896,
		32895,
		32639,
		32640,
		32895,
		32895,
		32896,
		32896,
		32640,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32895,
		32640,
		32639,
		32896,
		32896,
		32896,
		32896,
		32639,
		32640,
		32896,
		32896,
		32640,
		32896,
		32895,
		32895,
		32640,
		32896,
		32896,
		32640,
		32895,
		32896,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32896,
		32896,
		32639,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32896,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32639,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32895,
		32639,
		32640,
		32640,
		32640,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32895,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32896,
		32639,
		32895,
		32895,
		32640,
		32639,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32639,
		32895,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32640,
		32895,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32639,
		32640,
		32896,
		32640,
		32640,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32639,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32640,
		32895,
		32896,
		32640,
		32896,
		32639,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32640,
		32640,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32640,
		32639,
		32896,
		32896,
		32895,
		32640,
		32895,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32896,
		32895,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32895,
		32639,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32895,
		32896,
		32640,
		32640,
		32896,
		32896,
		32639,
		32895,
		32896,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32640,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32639,
		32896,
		32896,
		32639,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32639,
		32896,
		32895,
		32895,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32639,
		32896,
		32639,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32639,
		32896,
		32896,
		32896,
		32640,
		32640,
		32639,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32895,
		32639,
		32640,
		32895,
		32895,
		32895,
		32896,
		32896,
		32895,
		32640,
		32896,
		32640,
		32640,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32895,
		32895,
		32895,
		32639,
		32895,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32895,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32639,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32639,
		32895,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32639,
		32895,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32895,
		32896,
		32895,
		32640,
		32896,
		32895,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32639,
		32895,
		32896,
		32639,
		32896,
		32896,
		32639,
		32895,
		32895,
		32639,
		32896,
		32640,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32640,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32895,
		32895,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32640,
		32896,
		32895,
		32639,
		32895,
		32639,
		32639,
		32896,
		32896,
		32896,
		32639,
		32640,
		32896,
		32640,
		32896,
		32640,
		32896,
		32895,
		32896,
		32895,
		32639,
		32640,
		32895,
		32896,
		32896,
		32639,
		32640,
		32640,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32895,
		32895,
		32896,
		32896,
		32896,
		32895,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32639,
		32896,
		32639,
		32895,
		32896,
		32640,
		32896,
		32896,
		32640,
		32639,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32896,
		32639,
		32640,
		32896,
		32896,
		32640,
		32896,
		32895,
		32640,
		32640,
		32896,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32896,
		32640,
		32639,
		32640,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32895,
		32895,
		32896,
		32895,
		32896,
		32895,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32896,
		32640,
		32640,
		32639,
		32896,
		32896,
		32896,
		32640,
		32896,
		32639,
		32896,
		32896,
		32639,
		32640,
		32640,
		32896,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32639,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32640,
		32640,
		32896,
		32640,
		32896,
		32896,
		32895,
		32896,
		32639,
		32896,
		32640,
		32896,
		32895,
		32896,
		32895,
		32895,
		32640,
		32896,
		32896,
		32896,
		32895,
		32896,
		32896,
		32895,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32896,
		32640,
		32896,
		32896,
		32896,
		32639,
		32896,
		32896,
		32895,
		32896,
		32896,
		32640,
		32896,
		32640,
		32639,
		32895,
		32640,
		32895,
		32640,
		32896,
		32896,
		32895,
		32896,
		32640,
		32896,
		32896,
		32639,
		32896,
		32896,
		32896
	};


// FFT data transfer to VGA
unsigned int rangeFreq[] = {91, 173, 268, 378, 506,
							   655, 828, 1028, 1261, 1531,
							   1844, 2207, 2629, 3119, 3687,
							   4346, 5112, 6000, 13000, 20000};
//unsigned int rangeFreq[] = {1000, 2000, 3000, 4000, 5000,
//							6000, 7000, 8000, 9000, 10000,
//							11000, 12000, 13000, 14000, 15000,
//							16000, 17000, 18000, 19000, 20000};

unsigned int occurFreq[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};

// Pointer to VGA controller
volatile unsigned *vga = (volatile unsigned *) VGA_INTEGRATE_0_BASE;

int main()
{
	alt_putstr("Hello from Nios II!\n");

  // Initialize the image array and VGA screen to contain all black pixels
  for( int x = 0; x < 160; x++ ) {
	  for( int y = 0; y < 120; y++ ) {
		  image[x][y] = 0;
		  *vga = (y << 24) | (x << 16) | 0;
	  }
  }

  // Initialize the hardware timer
  init_isr();

  /* Event loop never exits. */
  while (1);

  return 0;
}

// Setup the hardware timer
void init_isr(void){
	alt_ic_isr_register(TIMER_0_IRQ_INTERRUPT_CONTROLLER_ID, TIMER_0_IRQ, (void *)vert_time_isr, NULL, 0x0);

	IOWR_ALTERA_AVALON_TIMER_CONTROL(TIMER_0_BASE, ALTERA_AVALON_TIMER_CONTROL_CONT_MSK | ALTERA_AVALON_TIMER_CONTROL_START_MSK | ALTERA_AVALON_TIMER_CONTROL_ITO_MSK);
}

static void hori_time_isr(void * context, alt_u32 id) {
	static int sizes[] = {50, 40, 30, 20, 10,
							  10, 20, 30, 40, 50,
							  50, 40, 30, 20, 10,
							  10, 20, 30, 40, 50};
	static int colors[] = {0b000001, 0b000001, 0b000001, 0b000001, 0b000001,
							0b000001, 0b000001, 0b000001, 0b000001, 0b000001,
							0b000001, 0b000001, 0b000001, 0b000001, 0b000001,
							0b000001, 0b000001, 0b000001, 0b000001, 0b000001};

	IOWR_ALTERA_AVALON_TIMER_STATUS(TIMER_0_BASE, 0);

	// Display and update image
	for( int i = 0; i < 160; i++) {
		for( int j = 0; j < 120; j++  ) {
			if (j % 6 != 0) {
				*vga = (j << 24) | (i << 16) | image[i][j];
				image[i][j] = (i > sizes[j/6] && i < 160-sizes[j/6]) ? colors[j/6] : 0;
			}
		}
	}

	// Change Size and Color
		for (int i = 0; i < 20; i++) {
			// size change
			if (sizes[i] < 10 || sizes[i] > 50) {
				sizes[i] = 30;
			} else {
				if (rand() % 2 == 0) {
					sizes[i] += (rand() % 5);
				} else {
					sizes[i] -= (rand() % 5);
				}
			}

			// color change
			if (rand() % 5 == 0) {
				if (colors[i] == 0b000011) {
						colors[i] = 0b000001;
				} else {
						colors[i]++;
				}
			}
		}
}

// Update the image array and display it on the VGA screen
static void vert_time_isr(void * context, alt_u32 id){
	static int progress = 0;

	IOWR_ALTERA_AVALON_TIMER_STATUS(TIMER_0_BASE, 0);
	progress++;
	if (progress % 20 == 0) {
		runfft(N*((int)(progress/20)));
	} else {
		runvga(progress%20);
	}
}

// Run one instance of the fft calculation
void runfft(int index) {
	// Copy data being processed
	volatile unsigned *curr_base_1 = RAM_1_BASE;
	volatile unsigned *curr_base_2 = RAM_2_BASE;
	//save the array to mem
	for(int i = index; i < index + N/2; i+=2){
		*curr_base_1 = data[i];		//save to memory
  		*curr_base_2 = data[i+1];

		curr_base_1 = (int*)curr_base_1 +1 ;	//increment
  		curr_base_2 = (int*)curr_base_2 +1 ;
	}

	for (int i = 0; i < N; i++){
		freq[i] = i * 11025 / N;
	}
	// Reset recurrent frequency data
	for (int i = 0; i < 20; i++) {
		occurFreq[i] = 0;
	}

	// FFT and frequency magnitude calculation
	int num = callfft();
	//save to array (magnitude)
	curr_base_1 = RAM_1_BASE;
	curr_base_2 = RAM_2_BASE;
	for(int i = 0; i < N/2; i+=2){
		magn[i] = *curr_base_1;		//save to array
		magn[i+1] = *curr_base_2;
  		curr_base_1 = (int*)curr_base_1 +1 ;	//increment
		curr_base_2 = (int*)curr_base_2 +1 ;

	}
	// Sort frequency and magnitude arrays
	// Currently O(n^2) --> Change to O(nlogn)
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N-1; j++) {
			if (magn[j] > magn[j+1]) {
				unsigned int temp = magn[j];
				magn[j] = magn[j+1];
				magn[j+1] = temp;

				temp = freq[j];
				freq[j] = freq[j+1];
				freq[j+1] = temp;
			}
		}
	}

	// Update the most recurrent frequencies
	for (int i = N; i >= N-40; i--) {
		for (int j = 0; j < 20; j++) {
			if ((signed int)(rangeFreq[j]-freq[i]) > 0) {
				occurFreq[j]++;
				break;
			}
		}
	}
}

// Update 1 frame on VGA output
void runvga(int change) {
	// Display and update image
		for( int j = 0; j < 120; j++ ) {
			for( int i = 0; i < 160; i++ ) {
				if (i % 8 != 0 && i % 8 != 1 ) {
					*vga = (j << 24) | (i << 16) | image[i][j];
					image[i][j] = (j < (sizes[i/8] + 10) || j > (110 - sizes[i/8])) ? colors[i/8] : 0;
				}
			}
		}

		// Change Size and Color
		for (int i = 0; i < 20; i++) {
			// size change
			if (change == 1) {
				sizes[i] = 3*occurFreq[i];
			}
			else {
				if (rand() % 3 == 0) {
					sizes[i] += (rand() % 2);
				} else if (rand() % 3 == 1) {
					sizes[i] -= (rand() % 2);
				}
			}

			// color change
			if (rand() % 5 == 0) {
				if (colors[i] == 0b000011) {
						colors[i] = 0b000001;
				} else {
						colors[i]++;
				}
			}
		}
}

int callfft(void) {
	volatile unsigned *fft_magic = FFT_ACCEL_0_BASE;
	*fft_magic = 0;
	alt_putstr("FFT started\n");
	//while(1); //testing something
	return *fft_magic;
}
